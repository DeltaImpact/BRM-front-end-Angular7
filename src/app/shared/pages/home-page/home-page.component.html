<div fxLayout="row">
  <div fxFlex="10" fxFlex.gt-sm="20"></div>
  <div fxFlex="90" fxFlex.gt-sm="80">
    <h1 class="header__title">{{ "topHeroes" | translate }}</h1>
    <app-hero-loading *ngIf="usersLoading"></app-hero-loading>
    <div id="heroes-list" *ngIf="heroes" [@fadeInOut]>
      <ng-container *ngFor="let hero of heroes">
        <app-hero-card [hero]="hero"></app-hero-card>
      </ng-container>
    </div>

    <!-- <div *ngIf="users" [@fadeInOut]>{{ users | json }}</div> -->

    <div fxLayout="row" fxLayoutAlign="space-between center">
      <div fxFlex="30">
        <mat-card class="hero-card">
          <mat-card-header>
            <div
              mat-card-avatar
              class="hero-header__image"
              [ngStyle]="{
                'background-image': 'url(assets/images/heroes/default.png)'
              }"
            ></div>

            <div>
              <form
                [formGroup]="newHeroForm"
                #form="ngForm"
                ngxScrollToFirstInvalid
                (ngSubmit)="createNewHero(newHeroForm.value)"
                autocomplete="on"
              >
                <mat-form-field class="input-container">
                  <input
                    matInput
                    name="hname"
                    type="text"
                    placeholder="{{ 'nameWithPalindrome' | translate }}"
                    formControlName="name"
                  />
                  <mat-error
                    *ngIf="!newHeroForm.controls.name.valid && form.submitted"
                  >
                    {{ "nameRequired" | translate }}
                  </mat-error>
                </mat-form-field>
                <button
                  mat-raised-button
                  type="submit"
                  [disabled]="form.submitted && !newHeroForm.valid"
                >
                  {{ "create" | translate }}
                </button>
                <div *ngIf="error">{{ error | translate }}</div>
              </form>
            </div>
          </mat-card-header>
        </mat-card>

        <div *ngIf="users">
          <ng-container *ngFor="let user of users">
            <app-user-card [user]="user"></app-user-card>
          </ng-container>
        </div>
      </div>
      <div fxFlex="30">
        <mat-card class="hero-card">
          <mat-card-header>
            <div
              mat-card-avatar
              class="hero-header__image"
              [ngStyle]="{
                'background-image': 'url(assets/images/letters/letter-r.png)'
              }"
            ></div>

            <div>
              <form
                [formGroup]="newHeroForm"
                #form="ngForm"
                ngxScrollToFirstInvalid
                (ngSubmit)="createNewHero(newHeroForm.value)"
                autocomplete="on"
              >
                <mat-form-field class="input-container">
                  <input
                    matInput
                    name="hname"
                    type="text"
                    placeholder="{{ 'nameWithPalindrome' | translate }}"
                    formControlName="name"
                  />
                  <mat-error
                    *ngIf="!newHeroForm.controls.name.valid && form.submitted"
                  >
                    {{ "nameRequired" | translate }}
                  </mat-error>
                </mat-form-field>
                <button
                  mat-raised-button
                  type="submit"
                  [disabled]="form.submitted && !newHeroForm.valid"
                >
                  {{ "create" | translate }}
                </button>
                <div *ngIf="error">{{ error | translate }}</div>
              </form>
            </div>
          </mat-card-header>
        </mat-card>

        <div *ngIf="users">
          <ng-container *ngFor="let role of roles">
            <app-user-card [user]="role"></app-user-card>
          </ng-container>
        </div>
      </div>
      <div fxFlex="30">
        <mat-card class="hero-card">
          <mat-card-header>
            <div
              mat-card-avatar
              class="hero-header__image"
              [ngStyle]="{
                'background-image': 'url(assets/images/letters/letter-p.png)'
              }"
            ></div>

            <div>
              <form
                [formGroup]="newHeroForm"
                #form="ngForm"
                ngxScrollToFirstInvalid
                (ngSubmit)="createNewHero(newHeroForm.value)"
                autocomplete="on"
              >
                <mat-form-field class="input-container">
                  <input
                    matInput
                    name="hname"
                    type="text"
                    placeholder="{{ 'nameWithPalindrome' | translate }}"
                    formControlName="name"
                  />
                  <mat-error
                    *ngIf="!newHeroForm.controls.name.valid && form.submitted"
                  >
                    {{ "nameRequired" | translate }}
                  </mat-error>
                </mat-form-field>
                <button
                  mat-raised-button
                  type="submit"
                  [disabled]="form.submitted && !newHeroForm.valid"
                >
                  {{ "create" | translate }}
                </button>
                <div *ngIf="error">{{ error | translate }}</div>
              </form>
            </div>
          </mat-card-header>
        </mat-card>

        <!-- <div *ngIf="users">
          <ng-container *ngFor="let user of users">
            <app-user-card [user]="user"></app-user-card>
          </ng-container>
        </div> -->
      </div>
    </div>
  </div>
  <div fxFlex="10" fxFlex.gt-sm="20"></div>
</div>
